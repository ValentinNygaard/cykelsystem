<!--Responsible for code: VN-->
<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <link rel="stylesheet" type="text/css" th:href="@{/bootstrap-grid.min.css}"/>
    <link rel="stylesheet" type="text/css" th:href="@{/styleemilie.css}"/>
    <meta charset="UTF-8">
    <title>Repair Case</title>
</head>
<body>

    <div class="topnav">
        <a href="/">CykelSystem</a>
        <a href="/overview">Oversigter</a>
        <a class="active" href="/getCustomer">Arbejdskort</a>
        <a href="/kassebilag">Kasserapport</a>
        <a href="/kunder">Kunder</a>
        <a href="/search">Søgninger</a>
        <a href="/settings">Indstillinger</a>
        <a href="/help">Hjælp</a>
    </div>

    <div class="container" style="padding-left:0px">

        <h1>Rediger arbejdskort</h1>
        &nbsp<br>
    </div>
    <div class="container" style="padding-left:0px">
        <div class="row">
            <div class="col-3">
                <h3>Kunde og cykel info:</h3>

                <p>Navn: <span th:text="${customer.name}"/><br>
                    Telefon: <span th:text="${customer.phone_number}"/><br>
                    Cykel: <span th:text="${bicycle.description}"/>
                </p>
            </div>

            <div class="col-3">
                <h3>Kommentarer:</h3>

                <span>
                    <form action="/updateComment" method="post">
                        <input type="hidden" name="comment_id" th:value="${comment.repair_case_id}">
                        <input type="text" id="comment" name="comment" th:value="${comment.comment}"><br>
                        <input type="submit" value="opdater">&nbsp&nbsp<a style="color: red;" th:href="@{'/deleteComment/'}">Slet</a>
                    </form>
                </span>
            </div>
            <div class="col-6">
                <h3>Basisoplysninger</h3>

                <form action="/updateRepairCase" method="post">
                <input type="hidden" name="repair_case_id" th:value="${repairCase.repair_case_id}">
                <label for="rnumber">Arbejdskort:&nbsp&nbsp&nbsp&nbsp&nbsp</label>
                <input type="text" id="rnumber" name="repair_number" size="6" pattern="[0-9]+" style="text-align:right;" th:value="${repairCase.repair_number}">
                    <label for="statusid">&nbsp&nbsp&nbsp&nbspStatus:</label>
                    <select id="statusid" name="status_id">
                        <option th:each="status :${statusList}" th:value="${status.status_id}" th:text="${status.status_title}" th:selected="${repairCase.status_id == status.status_id}"></option>
                    </select><br>
                    <label for="fdate">Oprettet:&nbsp&nbsp&nbsp&nbsp</label>
                <input type="text" id="fdate" name="start_date" size="10" pattern="(?:19|20)[0-9]{2}-(?:(?:0[1-9]|1[0-2])-(?:0[1-9]|1[0-9]|2[0-9])|(?:(?!02)(?:0[1-9]|1[0-2])-(?:30))|(?:(?:0[13578]|1[02])-31))" style="text-align:right;" th:value="${repairCase.start_date}">
                    <label for="cemployee">&nbsp&nbsp&nbsp&nbspOprettet af:&nbsp&nbsp&nbsp</label>
                    <select id="cemployee" name="customer_employee_id">
                        <option th:each="cemployee :${employeeList}" th:value="${cemployee.employee_id}" th:text="${cemployee.name}" th:selected="${repairCase.customer_employee_id == cemployee.employee_id}"></option>
                    </select><br>
                    <label for="tdate">Afhentning:</label>
                <input type="text" id="tdate" name="end_date" size="10" pattern="(?:19|20)[0-9]{2}-(?:(?:0[1-9]|1[0-2])-(?:0[1-9]|1[0-9]|2[0-9])|(?:(?!02)(?:0[1-9]|1[0-2])-(?:30))|(?:(?:0[13578]|1[02])-31))" style="text-align:right;" th:value="${repairCase.end_date}">
                    <label for="remployee">&nbsp&nbsp&nbsp&nbspUdføret af:&nbsp&nbsp&nbsp&nbsp</label>
                    <select id="remployee" name="repair_employee_id">
                        <option th:each="remployee :${employeeList}" th:value="${remployee.employee_id}" th:text="${remployee.name}" th:selected="${repairCase.repair_employee_id == remployee.employee_id}"></option>
                    </select><br>
                    <label for="ttime">Tidspunkt:&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp</label>
                <input type="text" id="ttime" name="end_time" size="3" pattern="[0-9]+" style="text-align:right;" th:value="${repairCase.end_time}">
                    &nbsp&nbsp


                <input type="hidden" id="rbicycle" name="bicycle_id" th:value="${repairCase.bicycle_id}">
                <input type="submit" value="opdater">
                </form>
                <br>&nbsp
            </div>
        </div>
    </div>
    <div class="container" style="padding-left:0px">
        &nbsp<br>
        <div class="row">
            <div class="col">

                <h3>Reperationer:</h3>

                <form action="/addRepairLine" method="post">
                    <label for="stdRepairline">Vælg og tilføj:</label>
                    <select required id="stdRepairline" name="std_repair_line_item_id">
                        <option selected value="">Vælg reparation</option>
                        <option th:each="stdRepairLine :${stdRepairLineList}" th:value="${stdRepairLine.std_repair_line_item_id}" th:text="${stdRepairLine.description}"></option>
                    </select>
                    <input type="submit" value="Tilføj">
                </form>

                <h4>Reperationslinier:</h4>

                <span th:each="rLine :${repairLineList}">
                    <form action="/updateRepairLine" method="post">
                        <input type="hidden" name="repair_line_item_id" th:value="${rLine.repair_line_item_id}">
                        <input type="text" id="description" name="description" th:value="${rLine.description}">
                        <input type="text" id="time" name="time" size="5" pattern="[0-9]+" style="text-align:right;" th:value="${rLine.time}">
                        <input type="text" id="price" name="price" size="5" pattern="[0-9]+" style="text-align:right;" th:value="${#numbers.formatDecimal(rLine.price,1,0)}">
                        <input type="submit" value="opdater">&nbsp&nbsp<a style="color: red;" th:href="@{'/deleteRepairLine/' + ${rLine.repair_line_item_id}}">Slet</a>
                    </form>
                </span>
            </div>
            <div class="col">
                <h3>Cykeldele og tilbehør:</h3>

                <form action="/addPartLine" method="post">
                    <label for="stdPartline">Vælg og tilføj:</label>
                    <select required id="stdPartline" name="std_part_line_item_id">
                        <option selected value="">Vælg del/tilbehør</option>
                        <option th:each="stdPartLine :${stdPartLineList}" th:value="${stdPartLine.std_part_line_item_id}" th:text="${stdPartLine.description}"></option>
                    </select>
                    <input type="submit" value="Tilføj">
                </form>

                <h4>Salgslinier:</h4>

                <span th:each="pLine :${partLineList}">
                    <form action="/updatePartLine" method="post">
                        <input type="hidden" name="part_line_item_id" th:value="${pLine.part_line_item_id}">
                        <input type="text" id="description" name="description" th:value="${pLine.description}">
                        <input type="text" id="price" name="price" pattern="[0-9]+" size="5" style="text-align:right;" th:value="${#numbers.formatDecimal(pLine.price,1,0)}">
                        <input type="submit" value="opdater">&nbsp&nbsp<a style="color: red;" th:href="@{'/deletePartLine/' + ${pLine.part_line_item_id}}">Slet</a>
                    </form>
                </span>
            </div>
        </div>
    </div>




</body>
</html>